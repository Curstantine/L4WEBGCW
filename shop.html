<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>

    <script type="module" src="./index.js"></script>

    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="./css/shop.css"/>

    <title>WaterWafer - Shop</title>

    <script>
        let shopCart = [];

        function addToCart(product, price, quantity, inputId) {
            quantity = parseInt(quantity);
            if (quantity < 1 || isNaN(quantity)) {
                alert("Please provide a valid quantity (minimum: 1).");
                return;
            }

            let existItem = shopCart.find((item) => item.product === product);
            if (existItem) {
                existItem.quantity += quantity;
            } else {
                shopCart.push({product, price, quantity});
            }
            displayCart();
            document.getElementById(inputId).value = ""; // Clear input field
        }

        function updateQuantity(index, newQuantity) {
            newQuantity = parseInt(newQuantity);
            if (newQuantity >= 1 && !isNaN(newQuantity)) {
                shopCart[index].quantity = newQuantity;
                displayCart();
            }
        }

        function removeItem(index) {
            shopCart.splice(index, 1);
            displayCart();
        }

        function displayCart() {
            let cartItems = document.getElementById("cart-items");
            cartItems.innerHTML = "";
            let totalPrice = 0;
            shopCart.forEach((item, index) => {
                let listItem = document.createElement("li");
                let totalPriceItem = item.price * item.quantity;
                listItem.innerHTML = `${item.product} (Quantity:
                        <input class="quantity-input" type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)">) 
                        - $${totalPriceItem} <button onclick="removeItem(${index})">Remove</button>`;
                cartItems.appendChild(listItem);
                totalPrice += totalPriceItem;
            });
            document.getElementById("total-price").innerText = totalPrice;
        }
    </script>
</head>

<body>
<nav></nav>

<main class="container">
    <h1>Shop with us</h1>

    <article id="boxes" class="space">
        <div class="option_box">
            <h4>Unique Designs</h4>
            <img src="./assets/uni.jpeg" width="140" height="140" alt="" aria-hidden="true">
        </div>

        <div class="option_box">
            <h4>Free Delivery</h4>
            <img src="./assets/deli.jpeg" width="140" height="140" alt="" aria-hidden="true">
        </div>

        <div class="option_box">
            <h4>Online Shopping</h4>
            <img src="./assets/onli.png" width="140" height="140" alt="" aria-hidden="true">
        </div>
    </article>


    <article class="product">
        <div class="product img">
            <img src="./assets/tshirt.jpeg" alt="tshirt" width="100" height="100">
            <p><b>Unisex T shirt</b></p>
            <p>Price: $25</p>
            <form>
                <label for="size">Size:</label>
                <select name="Size" id="size">
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                </select>
                <label for="colour">Colour:</label>
                <input type="color" id="colour" name="colour"/><br/>
                <br/>
                <br/>
            </form>

            <button
                onclick="addToCart('Unisex Tshirt', 25, document.getElementById('quantity-Unisex Tshirt').value, 'quantity-Unisex Tshirt')"
            >
                Add to cart
            </button>
            <input
                type="number"
                id="quantity-Unisex Tshirt"
                class="quantity-input"
                min="1"
            />
        </div>

        <div class="product img">
            <img
                src="./assets/hoodie.jpeg"
                alt="hoodie"
                width="100"
                height="100"
            />
            <p><b>Hoodie</b></p>
            <p>Price: $45</p>
            <form>
                <label for="size">Size:</label>
                <select name="Size" id="size">
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                </select>

                <label for="colour">Colour:</label>
                <input type="color" id="colour" name="colour"/><br/>

                <br/>
                <br/>
            </form>

            <button
                onclick="addToCart('Hoodie', 45, document.getElementById('quantity-Hoodie').value, 'quantity-Hoodie')"
            >
                Add to cart
            </button>
            <input
                type="number"
                id="quantity-Hoodie"
                class="quantity-input"
                min="1"
            />
        </div>

        <div class="product img">
            <img
                src="./assets/cap.jpeg"
                alt="cap"
                width="100"
                height="100"
            />
            <p><b>Cap </b></p>
            <p>Price: $15</p>
            <form>
                <label for="colour">Colour:</label>
                <input type="color" id="colour" name="colour"/><br/>
            </form>
            <br/>

            <button
                onclick="addToCart('Cap ', 15, document.getElementById('quantity-Cap ').value, 'quantity-Cap ')"
            >
                Add to cart
            </button>
            <input
                type="number"
                id="quantity-Cap "
                class="quantity-input"
                min="1"
            />
        </div>

        <br/>

        <div class="product img">
            <img
                src="./assets/hat.jpeg"
                alt="hat"
                width="100"
                height="100"
            />
            <p><b>Hat</b></p>
            <p>Price: $25</p>
            <form>
                <label for="colour">Colour:</label>
                <input type="color" id="colour" name="colour"/><br/>
            </form>
            <br/>

            <button
                onclick="addToCart('Hat', 25, document.getElementById('quantity-Hat').value, 'quantity-Hat')"
            >
                Add to cart
            </button>
            <input type="number" id="quantity-Hat" class="quantity-input" min="1"/>
        </div>

        <div class="product img">
            <img
                src="./assets/popsocket.jpeg"
                alt="popsocket"
                width="100"
                height="100"
            />
            <p><b>Pop Socket </b></p>
            <p>Price: $10</p>
            <form>
                <label for="colour">Colour:</label>
                <input type="color" id="colour" name="colour"/><br/>
            </form>
            <br/>
            <button
                onclick="addToCart('Pop socket', 10, document.getElementById('quantity-Pop socket').value, 'quantity-Pop socket')"
            >
                Add to cart
            </button>
            <input
                type="number"
                id="quantity-Pop socket"
                class="quantity-input"
                min="1"
            />
        </div>

        <div class="product img">
            <img
                src=" ./assets/bottle.jpeg"
                alt="bottle"
                width="100"
                height="100"
            />
            <p><b>Bottle </b></p>
            <p>Price: $30</p>
            <form>
                <label for="colour">Colour:</label>
                <input type="color" id="colour" name="colour"/><br/>
            </form>
            <br/>

            <button
                onclick="addToCart('Bottle ', 30, document.getElementById('quantity-Bottle ').value, 'quantity-Bottle ')"
            >
                Add to cart
            </button>
            <input
                type="number"
                id="quantity-Bottle "
                class="quantity-input"
                min="1"
            />
        </div>
    </article>


    <article class="checkout">
        <div class="customer-details">
            <h2>Customer Details</h2>
            <form name="customerdetails" id="customerdetails">
                <label for="name">Full name:</label>
                <input id="name" type="text" name="name" size="20"/>

                <label for="tel">Telephone number:</label>
                <input id="tel" type="tel" name="tel"/>

                <label for="address">Address:</label>
                <input id="address" type="text" name="address" size="30"/>

                <label for="email">Email:</label>
                <input id="email" type="email" name="email"/>
            </form>
        </div>

        <div id="cart">
            <h2>Shopping Cart</h2>
            <ul id="cart-items"></ul>
            <b>Total: $<span id="total-price">0</span></b>

            <div style="margin-top: 1rem;">
                <b style="font-size:0.875rem;">*SHIPPING FREE* </b>
            </div>
        </div>
    </article>


</main>

<footer></footer>
</body>

</html>
